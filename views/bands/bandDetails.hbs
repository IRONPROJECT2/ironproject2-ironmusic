
<img src="{{band.photo}}" alt="band image">
<h2>{{band.name}}</h2>
<h4>Biograf√≠a:</h4>
<p>{{band.biography}}</p>

<h4>Integrantes:</h4>
<ul>
  {{#each band.members}}
    <li>{{this.name}}</li>
    <li>{{this.description}}</li>
  {{/each}}
</ul>

{{#if currentUser}}
  {{#userIsInTheBand currentUser band}}
    <p>Estas en la banda</p>
  {{else}}
    {{#registerPending currentUser band}}
      <p>Solicitud enviada</p>
    {{else}}
      <form action="/joinBand/{{band.id}}" method="post">
        <button class="btn btn-primary">Unirme a banda</button>
      </form>
    {{/registerPending}}
  {{/userIsInTheBand}}
{{/if}}

  <div class="rating">
    <span class="rating__result"></span> 
    <i class="rating__star far fa-star"></i>
    <i class="rating__star far fa-star"></i>
    <i class="rating__star far fa-star"></i>
    <i class="rating__star far fa-star"></i>
    <i class="rating__star far fa-star"></i>
  </div>

<script>
  const ratingStars = [...document.getElementsByClassName("rating__star")];
  const ratingResult = document.querySelector(".rating__result");

  printRatingResult(ratingResult);

  function executeRating(stars, result) {
    const starClassActive = "rating__star fas fa-star";
    const starClassUnactive = "rating__star far fa-star";
    const starsLength = stars.length;
    let i;
    stars.map((star) => {
        star.onclick = () => {
          i = stars.indexOf(star);

          if (star.className.indexOf(starClassUnactive) !== -1) {
              printRatingResult(result, i + 1);
              for (i; i >= 0; --i) stars[i].className = starClassActive;
          } else {
              printRatingResult(result, i);
              for (i; i < starsLength; ++i) stars[i].className = starClassUnactive;
          }
        };
    });
  }

  function printRatingResult(result, num = 0) {
    result.textContent = `${num}/5`;
  }

  executeRating(ratingStars, ratingResult);

</script>